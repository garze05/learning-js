import{b as v}from"./app-Cxg8nEli.js";import{h as l,i as k,s as a}from"./utils-C1_2UEWA.js";const i=document.querySelector("#formContainer"),u=i.querySelector("#addFirstTaskContainer"),T=i.querySelector("#todoForm"),q=i.querySelector("#todoInput"),m=document.querySelector("#filterContainer"),p=m.querySelector("#filter"),r=document.querySelector("#todoListContainer"),f=r.querySelector("#todoList"),c=document.querySelector("#completedListContainer"),L=c.querySelector("#completedList");let g=0,h=0,S=0;T.addEventListener("submit",o=>{o.preventDefault();const t=q.value.trim();t!==""&&(E(t),q.value="")});function E(o,t=!1,n=null){const e=document.createElement("li"),s=new Intl.DateTimeFormat("es-ES",{dateStyle:"short",timeStyle:"short",hour12:!0});e.innerHTML=`
    <input type="checkbox">
    <div class="task-content">
      <span>${o}</span>
      <p class="date">Fecha creación: ${n===null?s.format(new Date):n}</p>
    </div>
    <button class="btnEdit"></button>
    <button class="btnDelete"></button>
  `,t?(e.querySelector("span").classList.add("completed"),e.querySelector(".date").classList.add("completed"),e.querySelector("input").checked=!0,L.appendChild(e)):f.appendChild(e),e.querySelector("input").addEventListener("change",()=>{e.querySelector("span").classList.toggle("completed"),e.querySelector(".date").classList.toggle("completed"),e.querySelector("span").classList.contains("completed")?L.appendChild(e):f.appendChild(e),y(),C()}),e.querySelector(".btnDelete").addEventListener("click",d=>{d.stopPropagation(),e.classList.add("removing"),e.addEventListener("transitionend",()=>{I(e),y()})}),e.querySelector(".btnEdit").addEventListener("click",d=>{d.stopPropagation(),F(e),console.log("Editando tarea")}),y(),f.children.length===1&&L.children.length===0&&(p.value="all",C()),p.value==="completed"&&!t?l(e):p.value==="uncompleted"&&t&&l(e)}function I(o){o.remove()}function F(o){const t=o.querySelector(".btnEdit");t.style.backgroundImage===`url("${v}save.svg")`?t.style.backgroundImage=`url("${v}edit.svg")`:t.style.backgroundImage=`url("${v}save.svg")`;const n=o.querySelector("span"),e=n.textContent;n.innerHTML=`
  <input type="text" value="${e}" />
  `;const s=n.querySelector("input");s.focus(),s.addEventListener("blur",()=>{k(s)?n.textContent=e:(n.textContent=s.value,y(),t.style.backgroundImage=`url(${v}edit.svg)`)}),s.addEventListener("keypress",d=>{(d.key==="Enter"||d.key==="Escape")&&(k(s)?n.textContent=e:(n.textContent=s.value,y()))})}function C(){switch(p.value){case"all":a(r),a(c);break;case"completed":a(c),l(r);break;case"uncompleted":a(r),l(c);break}}function b(){g=f.children.length,h=L.children.length,S=g+h,S===0?w():x(),console.log(S),document.getElementById("todoCounter").textContent=g,document.getElementById("completedCounter").textContent=h}function w(){a(u),u.classList.remove("fade-out"),u.classList.add("fade-in"),l(r),l(c),l(m),i.classList.remove("element-up"),i.classList.add("element-down")}function x(){u.classList.remove("fade-in"),l(u),a(r),a(m),a(c),r.classList.remove("fade-out"),r.classList.add("fade-in"),m.classList.remove("fade-out"),m.classList.add("fade-in"),c.classList.remove("fade-out"),c.classList.add("fade-in"),i.classList.remove("element-down"),i.classList.add("element-up")}function y(){const t=Array.from(f.children).concat(Array.from(L.children)).map(n=>({text:n.querySelector("span").textContent,completed:n.querySelector("span").classList.contains("completed"),date:n.querySelector(".date").textContent.replace("Fecha creación: ","")}));localStorage.setItem("tasks",JSON.stringify(t)),b()}document.addEventListener("DOMContentLoaded",()=>{const o=JSON.parse(localStorage.getItem("tasks"))||[];o.forEach(t=>{E(t.text,t.completed,t.date)}),p.addEventListener("change",C),b(),o.length>0?x():i.classList.remove("element-up")});
