import"./app-DCD30RqJ.js";import{h as l,i as C,s as a}from"./utils-C1_2UEWA.js";const i=document.querySelector("#formContainer"),u=i.querySelector("#addFirstTaskContainer"),x=i.querySelector("#todoForm"),k=i.querySelector("#todoInput"),m=document.querySelector("#filterContainer"),p=m.querySelector("#filter"),r=document.querySelector("#todoListContainer"),f=r.querySelector("#todoList"),c=document.querySelector("#completedListContainer"),L=c.querySelector("#completedList");let v=0,h=0,g=0;x.addEventListener("submit",o=>{o.preventDefault();const t=k.value.trim();t!==""&&(q(t),k.value="")});function q(o,t=!1,n=null){const e=document.createElement("li"),s=new Intl.DateTimeFormat("es-ES",{dateStyle:"short",timeStyle:"short",hour12:!0});e.innerHTML=`
    <input type="checkbox">
    <div class="task-content">
      <span>${o}</span>
      <p class="date">Fecha creación: ${n===null?s.format(new Date):n}</p>
    </div>
    <button class="btnEdit"></button>
    <button class="btnDelete"></button>
  `,t?(e.querySelector("span").classList.add("completed"),e.querySelector(".date").classList.add("completed"),e.querySelector("input").checked=!0,L.appendChild(e)):f.appendChild(e),e.querySelector("input").addEventListener("change",()=>{e.querySelector("span").classList.toggle("completed"),e.querySelector(".date").classList.toggle("completed"),e.querySelector("span").classList.contains("completed")?L.appendChild(e):f.appendChild(e),y(),S()}),e.querySelector(".btnDelete").addEventListener("click",d=>{d.stopPropagation(),e.classList.add("removing"),e.addEventListener("transitionend",()=>{T(e),y()})}),e.querySelector(".btnEdit").addEventListener("click",d=>{d.stopPropagation(),I(e),console.log("Editando tarea")}),y(),f.children.length===1&&L.children.length===0&&(p.value="all",S()),p.value==="completed"&&!t?l(e):p.value==="uncompleted"&&t&&l(e)}function T(o){o.remove()}function I(o){const t=o.querySelector(".btnEdit");t.style.backgroundImage=t.style.backgroundImage.includes("save.svg")?'url("/edit.svg")':'url("/save.svg")';const n=o.querySelector("span"),e=n.textContent;n.innerHTML=`
  <input type="text" value="${e}" />
  `;const s=n.querySelector("input");s.focus(),s.addEventListener("blur",()=>{C(s)?n.textContent=e:(n.textContent=s.value,y(),t.style.backgroundImage='url("/edit.svg")')}),s.addEventListener("keypress",d=>{(d.key==="Enter"||d.key==="Escape")&&(C(s)?n.textContent=e:(n.textContent=s.value,y()))})}function S(){switch(p.value){case"all":a(r),a(c);break;case"completed":a(c),l(r);break;case"uncompleted":a(r),l(c);break}}function E(){v=f.children.length,h=L.children.length,g=v+h,g===0?F():b(),console.log(g),document.getElementById("todoCounter").textContent=v,document.getElementById("completedCounter").textContent=h}function F(){a(u),u.classList.remove("fade-out"),u.classList.add("fade-in"),l(r),l(c),l(m),i.classList.remove("element-up"),i.classList.add("element-down")}function b(){u.classList.remove("fade-in"),l(u),a(r),a(m),a(c),r.classList.remove("fade-out"),r.classList.add("fade-in"),m.classList.remove("fade-out"),m.classList.add("fade-in"),c.classList.remove("fade-out"),c.classList.add("fade-in"),i.classList.remove("element-down"),i.classList.add("element-up")}function y(){const t=Array.from(f.children).concat(Array.from(L.children)).map(n=>({text:n.querySelector("span").textContent,completed:n.querySelector("span").classList.contains("completed"),date:n.querySelector(".date").textContent.replace("Fecha creación: ","")}));localStorage.setItem("tasks",JSON.stringify(t)),E()}document.addEventListener("DOMContentLoaded",()=>{const o=JSON.parse(localStorage.getItem("tasks"))||[];o.forEach(t=>{q(t.text,t.completed,t.date)}),p.addEventListener("change",S),E(),o.length>0?b():i.classList.remove("element-up")});
